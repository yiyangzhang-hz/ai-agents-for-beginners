<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "5cc6836626047aa055e8960c8484a7d0",
  "translation_date": "2025-08-30T14:47:01+00:00",
  "source_file": "11-agentic-protocols/code_samples/mcp-agents/README.md",
  "language_code": "hi"
}
-->
# MCP рдХреЗ рд╕рд╛рде рдПрдЬреЗрдВрдЯ-рд╕реЗ-рдПрдЬреЗрдВрдЯ рд╕рдВрдЪрд╛рд░ рдкреНрд░рдгрд╛рд▓реА рдмрдирд╛рдирд╛

> рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ - рдХреНрдпрд╛ рдЖрдк MCP рдкрд░ Agent2Agent рд╕рдВрдЪрд╛рд░ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ? рд╣рд╛рдВ!

MCP рдЕрдкрдиреЗ рдореВрд▓ рдЙрджреНрджреЗрд╢реНрдп "LLMs рдХреЛ рд╕рдВрджрд░реНрдн рдкреНрд░рджрд╛рди рдХрд░рдирд╛" рд╕реЗ рдХрд╛рдлреА рдЖрдЧреЗ рдмрдврд╝ рдЪреБрдХрд╛ рд╣реИред рд╣рд╛рд▓ рдХреЗ рд╕реБрдзрд╛рд░реЛрдВ рдЬреИрд╕реЗ [resumable streams](https://modelcontextprotocol.io/docs/concepts/transports#resumability-and-redelivery), [elicitation](https://modelcontextprotocol.io/specification/2025-06-18/client/elicitation), [sampling](https://modelcontextprotocol.io/specification/2025-06-18/client/sampling), рдФрд░ рд╕реВрдЪрдирд╛рдПрдВ ([progress](https://modelcontextprotocol.io/specification/2025-06-18/basic/utilities/progress) рдФрд░ [resources](https://modelcontextprotocol.io/specification/2025-06-18/schema#resourceupdatednotification)) рдХреЗ рд╕рд╛рде, MCP рдЕрдм рдЬрдЯрд┐рд▓ рдПрдЬреЗрдВрдЯ-рд╕реЗ-рдПрдЬреЗрдВрдЯ рд╕рдВрдЪрд╛рд░ рдкреНрд░рдгрд╛рд▓реА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдордЬрдмреВрдд рдЖрдзрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

## рдПрдЬреЗрдВрдЯ/рдЯреВрд▓ рдХреА рдЧрд▓рддрдлрд╣рдореА

рдЬреИрд╕реЗ-рдЬреИрд╕реЗ рдЕрдзрд┐рдХ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдРрд╕реЗ рдЯреВрд▓реНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдПрдЬреЗрдВрдЯрд┐рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рд╣реЛрддрд╛ рд╣реИ (рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ, рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдЕрддрд┐рд░рд┐рдХреНрдд рдЗрдирдкреБрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ, рдЖрджрд┐), рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЧрд▓рддрдлрд╣рдореА рдпрд╣ рд╣реИ рдХрд┐ MCP рдЕрдиреБрдкрдпреБрдХреНрдд рд╣реИ, рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХреЗ рд╢реБрд░реБрдЖрддреА рдЯреВрд▓реНрд╕ рдкреНрд░рд┐рдорд┐рдЯрд┐рд╡ рдХреЗ рдЙрджрд╛рд╣рд░рдг рд╕рд░рд▓ рдЕрдиреБрд░реЛрдз-рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреИрдЯрд░реНрди рдкрд░ рдХреЗрдВрджреНрд░рд┐рдд рдереЗред

рдпрд╣ рдзрд╛рд░рдгрд╛ рдЕрдм рдкреБрд░рд╛рдиреА рд╣реЛ рдЪреБрдХреА рд╣реИред MCP рд╕реНрдкреЗрд╕рд┐рдлрд┐рдХреЗрд╢рди рдХреЛ рдкрд┐рдЫрд▓реЗ рдХреБрдЫ рдорд╣реАрдиреЛрдВ рдореЗрдВ рдХрд╛рдлреА рд╣рдж рддрдХ рдмрдврд╝рд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдПрдЬреЗрдВрдЯрд┐рдХ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рдХрдореА рдХреЛ рдкреВрд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ:

- **рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдФрд░ рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо**: рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдореЗрдВ рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ
- **рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛**: рдХреНрд▓рд╛рдЗрдВрдЯ рдбрд┐рд╕реНрдХрдиреЗрдХреНрд╢рди рдХреЗ рдмрд╛рдж рдкреБрдирдГ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ
- **рдЯрд┐рдХрд╛рдКрдкрди**: рдкрд░рд┐рдгрд╛рдо рд╕рд░реНрд╡рд░ рдкреБрдирд░рд╛рд░рдВрдн рдХреЗ рдмрд╛рдж рднреА рдмрдиреЗ рд░рд╣рддреЗ рд╣реИрдВ (рдЬреИрд╕реЗ, resource links рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ)
- **рдорд▓реНрдЯреА-рдЯрд░реНрди**: рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рдЗрдирдкреБрдЯ elicitation рдФрд░ sampling рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ

рдЗрди рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЛ MCP рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдкрд░ рддреИрдирд╛рдд рдЬрдЯрд┐рд▓ рдПрдЬреЗрдВрдЯрд┐рдХ рдФрд░ рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рд╕рдВрджрд░реНрдн рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдПрдЬреЗрдВрдЯ рдХреЛ "рдЯреВрд▓" рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░реЗрдВрдЧреЗ рдЬреЛ MCP рд╕рд░реНрд╡рд░ рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдПрдХ рд╣реЛрд╕реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореМрдЬреВрдж рд╣реИ рдЬреЛ MCP рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, MCP рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рддреНрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдПрдЬреЗрдВрдЯ рдХреЛ рдХреЙрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

## MCP рдЯреВрд▓ рдХреЛ "рдПрдЬреЗрдВрдЯрд┐рдХ" рдХреНрдпрд╛ рдмрдирд╛рддрд╛ рд╣реИ?

рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ рдЬрд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдЖрдЗрдП рдпрд╣ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдПрдЬреЗрдВрдЯреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪрд╛ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред

> рд╣рдо рдПрдХ рдПрдЬреЗрдВрдЯ рдХреЛ рдПрдХ рдРрд╕реА рдЗрдХрд╛рдИ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВрдЧреЗ рдЬреЛ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╕реНрд╡рд╛рдпрддреНрдд рд░реВрдк рд╕реЗ рдХрд╛рд░реНрдп рдХрд░ рд╕рдХрддреА рд╣реИ, рдЬрдЯрд┐рд▓ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реИ рдЬрд┐рдирдХреЗ рд▓рд┐рдП рдХрдИ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдпрд╛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдорд╛рдпреЛрдЬрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред

### 1. рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдФрд░ рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо

рдкрд╛рд░рдВрдкрд░рд┐рдХ рдЕрдиреБрд░реЛрдз-рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреИрдЯрд░реНрди рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреЗред рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:

- рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдореЗрдВ рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ
- рдордзреНрдпрд╡рд░реНрддреА рдкрд░рд┐рдгрд╛рдо

**MCP рд╕рдорд░реНрдерди**: Resource update notifications рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреА рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддреА рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ JSON-RPC рдХреЗ 1:1 рдЕрдиреБрд░реЛрдз/рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЙрдбрд▓ рдХреЗ рд╕рд╛рде рд╕рдВрдШрд░реНрд╖ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рдбрд┐рдЬрд╝рд╛рдЗрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

| рд╕реБрд╡рд┐рдзрд╛                     | рдЙрдкрдпреЛрдЧ рдХрд╛ рдорд╛рдорд▓рд╛                                                                                                                                                                       | MCP рд╕рдорд░реНрдерди                                                                                 |
| -------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ | рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛрдбрдмреЗрд╕ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХрд╛рд░реНрдп рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред рдПрдЬреЗрдВрдЯ рдкреНрд░рдЧрддрд┐ рдХреЛ рд╕реНрдЯреНрд░реАрдо рдХрд░рддрд╛ рд╣реИ: "10% - рдирд┐рд░реНрднрд░рддрд╛ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░ рд░рд╣рд╛ рд╣реИ... 25% - рдЯрд╛рдЗрдкрд╕реНрдХреНрд░рд┐рдкреНрдЯ рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реИ... 50% - рдЖрдпрд╛рдд рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░ рд░рд╣рд╛ рд╣реИ..." | тЬЕ рдкреНрд░рдЧрддрд┐ рд╕реВрдЪрдирд╛рдПрдВ                                                                          |
| рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо              | "рдПрдХ рдХрд┐рддрд╛рдм рдмрдирд╛рдПрдВ" рдХрд╛рд░реНрдп рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рд╕реНрдЯреНрд░реАрдо рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ 1) рдХрд╣рд╛рдиреА рдХрд╛ рдЖрд░реНрдХ рдЖрдЙрдЯрд▓рд╛рдЗрди, 2) рдЕрдзреНрдпрд╛рдп рд╕реВрдЪреА, 3) рдкреНрд░рддреНрдпреЗрдХ рдЕрдзреНрдпрд╛рдп рдЬреИрд╕реЗ рд╣реА рдкреВрд░рд╛ рд╣реЛрддрд╛ рд╣реИред рд╣реЛрд╕реНрдЯ рдХрд┐рд╕реА рднреА рдЪрд░рдг рдореЗрдВ рдирд┐рд░реАрдХреНрд╖рдг, рд░рджреНрдж рдпрд╛ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред | тЬЕ рд╕реВрдЪрдирд╛рдУрдВ рдХреЛ "рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд" рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ, PR 383, 776 рдкрд░ рдкреНрд░рд╕реНрддрд╛рд╡ рджреЗрдЦреЗрдВ |

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>рдЪрд┐рддреНрд░ 1:</strong> рдпрд╣ рдЖрд░реЗрдЦ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ MCP рдПрдЬреЗрдВрдЯ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛рд░реНрдп рдХреЗ рджреМрд░рд╛рди рд╣реЛрд╕реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдореЗрдВ рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ рдФрд░ рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо рдХреИрд╕реЗ рд╕реНрдЯреНрд░реАрдо рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд╖реНрдкрд╛рджрди рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░ рд╕рдХрддрд╛ рд╣реИред
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as Host App<br/>(MCP Client)
    participant Server as MCP Server<br/>(Agent Tool)

    User->>Host: Start long task
    Host->>Server: Call agent_tool()

    loop Progress Updates
        Server-->>Host: Progress + partial results
        Host-->>User: Stream updates
    end

    Server-->>Host: тЬЕ Final result
    Host-->>User: Complete
```

### 2. рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛

рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рдмрд╛рдзрд╛рдУрдВ рдХреЛ рд╕рд╣рдЬрддрд╛ рд╕реЗ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:

- (рдХреНрд▓рд╛рдЗрдВрдЯ) рдбрд┐рд╕реНрдХрдиреЗрдХреНрд╢рди рдХреЗ рдмрд╛рдж рдкреБрдирдГ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ
- рдЬрд╣рд╛рдВ рд╕реЗ рдЫреЛрдбрд╝рд╛ рдерд╛ рд╡рд╣рд╛рдВ рд╕реЗ рдЬрд╛рд░реА рд░рдЦреЗрдВ (рд╕рдВрджреЗрд╢ рдкреБрдирдГ рд╡рд┐рддрд░рдг)

**MCP рд╕рдорд░реНрдерди**: MCP StreamableHTTP transport рдЖрдЬ рд╕рддреНрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдФрд░ рд╕рдВрджреЗрд╢ рдкреБрдирдГ рд╡рд┐рддрд░рдг рдХреЛ рд╕рддреНрд░ IDs рдФрд░ рдЕрдВрддрд┐рдо рдШрдЯрдирд╛ IDs рдХреЗ рд╕рд╛рде рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдпрд╣рд╛рдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╕рд░реНрд╡рд░ рдХреЛ рдПрдХ EventStore рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдкреБрдирдГ рдХрдиреЗрдХреНрд╢рди рдкрд░ рдШрдЯрдирд╛ рдкреБрдирдГ рдЪрд▓рд╛рдиреЗ рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИред  
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдПрдХ рд╕рд╛рдореБрджрд╛рдпрд┐рдХ рдкреНрд░рд╕реНрддрд╛рд╡ (PR #975) рд╣реИ рдЬреЛ transport-agnostic рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╕реНрдЯреНрд░реАрдореНрд╕ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рддрд╛ рд╣реИред

| рд╕реБрд╡рд┐рдзрд╛      | рдЙрдкрдпреЛрдЧ рдХрд╛ рдорд╛рдорд▓рд╛                                                                                                                                                   | MCP рд╕рдорд░реНрдерди                                                                |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн | рдХреНрд▓рд╛рдЗрдВрдЯ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛рд░реНрдп рдХреЗ рджреМрд░рд╛рди рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рдкреБрдирдГ рдХрдиреЗрдХреНрд╢рди рдкрд░, рд╕рддреНрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЫреВрдЯреЗ рд╣реБрдП рдШрдЯрдирд╛рдУрдВ рдХреЛ рдкреБрдирдГ рдЪрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рд╕реЗ рдЫреЛрдбрд╝рд╛ рдерд╛ рд╡рд╣рд╛рдВ рд╕реЗ рдирд┐рд░реНрдмрд╛рдз рд░реВрдк рд╕реЗ рдЬрд╛рд░реА рд░рд╣рддрд╛ рд╣реИред | тЬЕ StreamableHTTP transport рд╕рддреНрд░ IDs, рдШрдЯрдирд╛ рдкреБрдирдГ рдЪрд▓рд╛рдиреЗ, рдФрд░ EventStore рдХреЗ рд╕рд╛рде |

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>рдЪрд┐рддреНрд░ 2:</strong> рдпрд╣ рдЖрд░реЗрдЦ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ MCP рдХрд╛ StreamableHTTP transport рдФрд░ event store рдХреИрд╕реЗ рд╕рд╣рдЬ рд╕рддреНрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИ: рдпрджрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдкреБрдирдГ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЫреВрдЯреЗ рд╣реБрдП рдШрдЯрдирд╛рдУрдВ рдХреЛ рдкреБрдирдГ рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИ, рдкреНрд░рдЧрддрд┐ рдХреА рд╣рд╛рдирд┐ рдХреЗ рдмрд┐рдирд╛ рдХрд╛рд░реНрдп рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддрд╛ рд╣реИред
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as Host App<br/>(MCP Client)
    participant Server as MCP Server<br/>(Agent Tool)
    participant Store as Event Store

    User->>Host: Start task
    Host->>Server: Call tool [session: abc123]
    Server->>Store: Save events

    Note over Host,Server: ЁЯТе Connection lost

    Host->>Server: Reconnect [session: abc123]
    Store-->>Server: Replay events
    Server-->>Host: Catch up + continue
    Host-->>User: тЬЕ Complete
```

### 3. рдЯрд┐рдХрд╛рдКрдкрди

рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рд╕реНрдерд╛рдпреА рд╕реНрдерд┐рддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ:

- рдкрд░рд┐рдгрд╛рдо рд╕рд░реНрд╡рд░ рдкреБрдирд░рд╛рд░рдВрдн рдХреЗ рдмрд╛рдж рднреА рдмрдиреЗ рд░рд╣рддреЗ рд╣реИрдВ
- рд╕реНрдерд┐рддрд┐ рдХреЛ рдЖрдЙрдЯ-рдСрдл-рдмреИрдВрдб рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ
- рд╕рддреНрд░реЛрдВ рдХреЗ рдмреАрдЪ рдкреНрд░рдЧрддрд┐ рдЯреНрд░реИрдХрд┐рдВрдЧ

**MCP рд╕рдорд░реНрдерди**: MCP рдЕрдм рдЯреВрд▓ рдХреЙрд▓ рдХреЗ рд▓рд┐рдП Resource link return type рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдЖрдЬ, рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд рдкреИрдЯрд░реНрди рдПрдХ рдЯреВрд▓ рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд░рдирд╛ рд╣реИ рдЬреЛ рдПрдХ рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рддреБрд░рдВрдд рдПрдХ resource link рд▓реМрдЯрд╛рддрд╛ рд╣реИред рдЯреВрд▓ рдкреГрд╖реНрдарднреВрдорд┐ рдореЗрдВ рдХрд╛рд░реНрдп рдХреЛ рд╕рдВрдмреЛрдзрд┐рдд рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд╕рдВрд╕рд╛рдзрди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдмрджрд▓реЗ рдореЗрдВ, рдХреНрд▓рд╛рдЗрдВрдЯ рдЗрд╕ рд╕рдВрд╕рд╛рдзрди рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреБрди рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдВрд╢рд┐рдХ рдпрд╛ рдкреВрд░реНрдг рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЬрд╛ рд╕рдХреЗрдВ (рдЖрдзрд╛рд░рд┐рдд рд╕рдВрд╕рд╛рдзрди рдЕрдкрдбреЗрдЯ рдЬреЛ рд╕рд░реНрд╡рд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ) рдпрд╛ рд╕рдВрд╕рд╛рдзрди рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ рд╕реВрдЪрдирд╛рдУрдВ рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗ рд╕рдХрддрд╛ рд╣реИред

рдпрд╣рд╛рдВ рдПрдХ рд╕реАрдорд╛ рдпрд╣ рд╣реИ рдХрд┐ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдкреЛрд▓ рдХрд░рдирд╛ рдпрд╛ рдЕрдкрдбреЗрдЯ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрдирд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдкреИрдорд╛рдиреЗ рдкрд░ рдкреНрд░рднрд╛рд╡ рдкрдбрд╝рддрд╛ рд╣реИред рдПрдХ рд╕рд╛рдореБрджрд╛рдпрд┐рдХ рдкреНрд░рд╕реНрддрд╛рд╡ (рдЬрд┐рд╕рдореЗрдВ #992 рд╢рд╛рдорд┐рд▓ рд╣реИ) рд╣реИ рдЬреЛ рд╡реЗрдмрд╣реБрдХ рдпрд╛ рдЯреНрд░рд┐рдЧрд░реНрд╕ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╕рд░реНрд╡рд░ рдХреНрд▓рд╛рдЗрдВрдЯ/рд╣реЛрд╕реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЕрдкрдбреЗрдЯ рдХреА рд╕реВрдЪрдирд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

| рд╕реБрд╡рд┐рдзрд╛    | рдЙрдкрдпреЛрдЧ рдХрд╛ рдорд╛рдорд▓рд╛                                                                                                                                        | MCP рд╕рдорд░реНрдерди                                                        |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| рдЯрд┐рдХрд╛рдКрдкрди | рд╕рд░реНрд╡рд░ рдбреЗрдЯрд╛ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХрд╛рд░реНрдп рдХреЗ рджреМрд░рд╛рди рдХреНрд░реИрд╢ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рдкрд░рд┐рдгрд╛рдо рдФрд░ рдкреНрд░рдЧрддрд┐ рдкреБрдирд░рд╛рд░рдВрдн рдХреЗ рдмрд╛рдж рднреА рдмрдиреА рд░рд╣рддреА рд╣реИ, рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд╕реНрдерд╛рдпреА рд╕рдВрд╕рд╛рдзрди рд╕реЗ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддрд╛ рд╣реИред | тЬЕ Resource links рд╕реНрдерд╛рдпреА рд╕реНрдЯреЛрд░реЗрдЬ рдФрд░ рд╕реНрдерд┐рддрд┐ рд╕реВрдЪрдирд╛рдУрдВ рдХреЗ рд╕рд╛рде |

рдЖрдЬ, рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдкреИрдЯрд░реНрди рдПрдХ рдЯреВрд▓ рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд░рдирд╛ рд╣реИ рдЬреЛ рдПрдХ рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рддреБрд░рдВрдд рдПрдХ resource link рд▓реМрдЯрд╛рддрд╛ рд╣реИред рдЯреВрд▓ рдкреГрд╖реНрдарднреВрдорд┐ рдореЗрдВ рдХрд╛рд░реНрдп рдХреЛ рд╕рдВрдмреЛрдзрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд╕рдВрд╕рд╛рдзрди рд╕реВрдЪрдирд╛рдПрдВ рдЬрд╛рд░реА рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддреА рд╣реИрдВ рдпрд╛ рдЖрдВрд╢рд┐рдХ рдкрд░рд┐рдгрд╛рдо рд╢рд╛рдорд┐рд▓ рдХрд░ рд╕рдХрддреА рд╣реИрдВ, рдФрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рд╕рдВрд╕рд╛рдзрди рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>рдЪрд┐рддреНрд░ 3:</strong> рдпрд╣ рдЖрд░реЗрдЦ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ MCP рдПрдЬреЗрдВрдЯ рд╕реНрдерд╛рдпреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рд╕реНрдерд┐рддрд┐ рд╕реВрдЪрдирд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рд╕рд░реНрд╡рд░ рдкреБрдирд░рд╛рд░рдВрдн рдХреЗ рдмрд╛рдж рднреА рдХреНрд▓рд╛рдЗрдВрдЯ рдкреНрд░рдЧрддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as Host App<br/>(MCP Client)
    participant Server as MCP Server<br/>(Agent Tool)
    participant DB as Persistent Storage

    User->>Host: Start task
    Host->>Server: Call tool
    Server->>DB: Create resource + updates
    Server-->>Host: ЁЯФЧ Resource link

    Note over Server: ЁЯТе Server restart

    User->>Host: Check status
    Host->>Server: Get resource
    Server->>DB: Load state
    Server-->>Host: Current progress
    Server->>DB: Complete + notify
    Host-->>User: тЬЕ Complete
```

### 4. рдорд▓реНрдЯреА-рдЯрд░реНрди рдЗрдВрдЯрд░реИрдХреНрд╢рди

рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рдЕрдХреНрд╕рд░ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдЕрддрд┐рд░рд┐рдХреНрдд рдЗрдирдкреБрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ:

- рдорд╛рдирд╡ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдпрд╛ рдЕрдиреБрдореЛрджрди
- рдЬрдЯрд┐рд▓ рдирд┐рд░реНрдгрдпреЛрдВ рдХреЗ рд▓рд┐рдП AI рд╕рд╣рд╛рдпрддрд╛
- рдЧрддрд┐рд╢реАрд▓ рдкреИрд░рд╛рдореАрдЯрд░ рд╕рдорд╛рдпреЛрдЬрди

**MCP рд╕рдорд░реНрдерди**: рдкреВрд░реА рддрд░рд╣ рд╕реЗ sampling (AI рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП) рдФрд░ elicitation (рдорд╛рдирд╡ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдорд░реНрдерд┐рддред

| рд╕реБрд╡рд┐рдзрд╛                 | рдЙрдкрдпреЛрдЧ рдХрд╛ рдорд╛рдорд▓рд╛                                                                                                                                     | MCP рд╕рдорд░реНрдерди                                           |
| ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------- |
| рдорд▓реНрдЯреА-рдЯрд░реНрди рдЗрдВрдЯрд░реИрдХреНрд╢рди | рдпрд╛рддреНрд░рд╛ рдмреБрдХрд┐рдВрдЧ рдПрдЬреЗрдВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдореВрд▓реНрдп рдкреБрд╖реНрдЯрд┐ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ, рдлрд┐рд░ рдмреБрдХрд┐рдВрдЧ рд▓реЗрдирджреЗрди рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдпрд╛рддреНрд░рд╛ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП AI рд╕реЗ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред | тЬЕ рдорд╛рдирд╡ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП elicitation, AI рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП sampling |

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>рдЪрд┐рддреНрд░ 4:</strong> рдпрд╣ рдЖрд░реЗрдЦ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ MCP рдПрдЬреЗрдВрдЯ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд░реВрдк рд╕реЗ рдорд╛рдирд╡ рдЗрдирдкреБрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдЬрдЯрд┐рд▓, рдорд▓реНрдЯреА-рдЯрд░реНрди рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЬреИрд╕реЗ рдкреБрд╖реНрдЯрд┐ рдФрд░ рдЧрддрд┐рд╢реАрд▓ рдирд┐рд░реНрдгрдп рд▓реЗрдиреЗ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП AI рд╕рд╣рд╛рдпрддрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
</div>

```mermaid
sequenceDiagram
    participant User
    participant Host as Host App<br/>(MCP Client)
    participant Server as MCP Server<br/>(Agent Tool)

    User->>Host: Book flight
    Host->>Server: Call travel_agent

    Server->>Host: Elicitation: "Confirm $500?"
    Note over Host: Elicitation callback (if available)
    Host->>User: ЁЯТ░ Confirm price?
    User->>Host: "Yes"
    Host->>Server: Confirmed

    Server->>Host: Sampling: "Summarize data"
    Note over Host: AI callback (if available)
    Host->>Server: Report summary

    Server->>Host: тЬЕ Flight booked
```

## MCP рдкрд░ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ - рдХреЛрдб рдЕрд╡рд▓реЛрдХрди

рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рдо рдПрдХ [рдХреЛрдб рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА](https://github.com/victordibia/ai-tutorials/tree/main/MCP%20Agents) рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ MCP Python SDK рдХреЗ рд╕рд╛рде StreamableHTTP transport рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдПрдЬреЗрдВрдЯреЛрдВ рдХрд╛ рдПрдХ рдкреВрд░реНрдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╢рд╛рдорд┐рд▓ рд╣реИред рдпрд╣ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ MCP рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдХреИрд╕реЗ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдкрд░рд┐рд╖реНрдХреГрдд рдПрдЬреЗрдВрдЯ-рдЬреИрд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рд╕рдХреНрд╖рдо рд╣реЛ рд╕рдХреЗрдВред

рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╣рдо рджреЛ рдкреНрд░рд╛рдердорд┐рдХ рдПрдЬреЗрдВрдЯ рдЯреВрд▓реНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд░реНрд╡рд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ:

- **рдпрд╛рддреНрд░рд╛ рдПрдЬреЗрдВрдЯ** - рдореВрд▓реНрдп рдкреБрд╖реНрдЯрд┐ рдХреЗ рд╕рд╛рде рдпрд╛рддреНрд░рд╛ рдмреБрдХрд┐рдВрдЧ рд╕реЗрд╡рд╛ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддрд╛ рд╣реИ
- **рдЕрдиреБрд╕рдВрдзрд╛рди рдПрдЬреЗрдВрдЯ** - AI-рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рд╕рд╛рд░рд╛рдВрд╢реЛрдВ рдХреЗ рд╕рд╛рде рдЕрдиреБрд╕рдВрдзрд╛рди рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ

рджреЛрдиреЛрдВ рдПрдЬреЗрдВрдЯ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ, рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рдкреБрд╖реНрдЯрд┐, рдФрд░ рдкреВрд░реНрдг рд╕рддреНрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░рддреЗ рд╣реИрдВред

### рдкреНрд░рдореБрдЦ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЕрд╡рдзрд╛рд░рдгрд╛рдПрдВ

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрдиреБрднрд╛рдЧ рдкреНрд░рддреНрдпреЗрдХ рдХреНрд╖рдорддрд╛ рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рдПрдЬреЗрдВрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рд╣реЛрд╕реНрдЯ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ:

#### рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдФрд░ рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ - рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХрд╛рд░реНрдп рд╕реНрдерд┐рддрд┐

рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рджреМрд░рд╛рди рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рддреА рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдХрд╛рд░реНрдп рд╕реНрдерд┐рддрд┐ рдФрд░ рдордзреНрдпрд╡рд░реНрддреА рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рд░рдЦрддреА рд╣реИред

**рд╕рд░реНрд╡рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди (рдПрдЬреЗрдВрдЯ рдкреНрд░рдЧрддрд┐ рд╕реВрдЪрдирд╛рдПрдВ рднреЗрдЬрддрд╛ рд╣реИ):**

```python
# From server/server.py - Travel agent sending progress updates
for i, step in enumerate(steps):
    await ctx.session.send_progress_notification(
        progress_token=ctx.request_id,
        progress=i * 25,
        total=100,
        message=step,
        related_request_id=str(ctx.request_id)
    )
    await anyio.sleep(2)  # Simulate work

# Alternative: Log messages for detailed step-by-step updates
await ctx.session.send_log_message(
    level="info",
    data=f"Processing step {current_step}/{steps} ({progress_percent}%)",
    logger="long_running_agent",
    related_request_id=ctx.request_id,
)
```

**рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди (рд╣реЛрд╕реНрдЯ рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ):**

```python
# From client/client.py - Client handling real-time notifications
async def message_handler(message) -> None:
    if isinstance(message, types.ServerNotification):
        if isinstance(message.root, types.LoggingMessageNotification):
            console.print(f"ЁЯУб [dim]{message.root.params.data}[/dim]")
        elif isinstance(message.root, types.ProgressNotification):
            progress = message.root.params
            console.print(f"ЁЯФД [yellow]{progress.message} ({progress.progress}/{progress.total})[/yellow]")

# Register message handler when creating session
async with ClientSession(
    read_stream, write_stream,
    message_handler=message_handler
) as session:
```

#### Elicitation - рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛

Elicitation рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИред рдпрд╣ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рджреМрд░рд╛рди рдкреБрд╖реНрдЯрд┐, рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг, рдпрд╛ рдЕрдиреБрдореЛрджрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред

**рд╕рд░реНрд╡рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди (рдПрдЬреЗрдВрдЯ рдкреБрд╖реНрдЯрд┐ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ):**

```python
# From server/server.py - Travel agent requesting price confirmation
elicit_result = await ctx.session.elicit(
    message=f"Please confirm the estimated price of $1200 for your trip to {destination}",
    requestedSchema=PriceConfirmationSchema.model_json_schema(),
    related_request_id=ctx.request_id,
)

if elicit_result and elicit_result.action == "accept":
    # Continue with booking
    logger.info(f"User confirmed price: {elicit_result.content}")
elif elicit_result and elicit_result.action == "decline":
    # Cancel the booking
    booking_cancelled = True
```

**рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди (рд╣реЛрд╕реНрдЯ elicitation callback рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ):**

```python
# From client/client.py - Client handling elicitation requests
async def elicitation_callback(context, params):
    console.print(f"ЁЯТм Server is asking for confirmation:")
    console.print(f"   {params.message}")

    response = console.input("Do you accept? (y/n): ").strip().lower()

    if response in ['y', 'yes']:
        return types.ElicitResult(
            action="accept",
            content={"confirm": True, "notes": "Confirmed by user"}
        )
    else:
        return types.ElicitResult(
            action="decline",
            content={"confirm": False, "notes": "Declined by user"}
        )

# Register the callback when creating the session
async with ClientSession(
    read_stream, write_stream,
    elicitation_callback=elicitation_callback
) as session:
```

#### Sampling - AI рд╕рд╣рд╛рдпрддрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛

Sampling рдПрдЬреЗрдВрдЯреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдЬрдЯрд┐рд▓ рдирд┐рд░реНрдгрдпреЛрдВ рдпрд╛ рд╕рд╛рдордЧреНрд░реА рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП LLM рд╕рд╣рд╛рдпрддрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИред рдпрд╣ рдорд╛рдирд╡-AI рд╣рд╛рдЗрдмреНрд░рд┐рдб рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИред

**рд╕рд░реНрд╡рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди (рдПрдЬреЗрдВрдЯ AI рд╕рд╣рд╛рдпрддрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ):**

```python
# From server/server.py - Research agent requesting AI summary
sampling_result = await ctx.session.create_message(
    messages=[
        SamplingMessage(
            role="user",
            content=TextContent(type="text", text=f"Please summarize the key findings for research on: {topic}")
        )
    ],
    max_tokens=100,
    related_request_id=ctx.request_id,
)

if sampling_result and sampling_result.content:
    if sampling_result.content.type == "text":
        sampling_summary = sampling_result.content.text
        logger.info(f"Received sampling summary: {sampling_summary}")
```

**рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди (рд╣реЛрд╕реНрдЯ sampling callback рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ):**

```python
# From client/client.py - Client handling sampling requests
async def sampling_callback(context, params):
    message_text = params.messages[0].content.text if params.messages else 'No message'
    console.print(f"ЁЯза Server requested sampling: {message_text}")

    # In a real application, this could call an LLM API
    # For demo purposes, we provide a mock response
    mock_response = "Based on current research, MCP has evolved significantly..."

    return types.CreateMessageResult(
        role="assistant",
        content=types.TextContent(type="text", text=mock_response),
        model="interactive-client",
        stopReason="endTurn"
    )

# Register the callback when creating the session
async with ClientSession(
    read_stream, write_stream,
    sampling_callback=sampling_callback,
    elicitation_callback=elicitation_callback
) as session:
```

#### рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ - рдбрд┐рд╕реНрдХрдиреЗрдХреНрд╢рди рдХреЗ рдмрд╛рдж рд╕рддреНрд░ рдирд┐рд░рдВрддрд░рддрд╛

рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдПрдЬреЗрдВрдЯ рдХрд╛рд░реНрдп рдХреНрд▓рд╛рдЗрдВрдЯ рдбрд┐рд╕реНрдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕рд╣рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреБрдирдГ рдХрдиреЗрдХреНрд╢рди рдкрд░ рдирд┐рд░реНрдмрд╛рдз рд░реВрдк рд╕реЗ рдЬрд╛рд░реА рд░рд╣ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕реЗ event stores рдФрд░ resumption tokens рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

**Event Store рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди (рд╕рд░реНрд╡рд░ рд╕рддреНрд░ рд╕реНрдерд┐рддрд┐ рд░рдЦрддрд╛ рд╣реИ):**

```python
# From server/event_store.py - Simple in-memory event store
class SimpleEventStore(EventStore):
    def __init__(self):
        self._events: list[tuple[StreamId, EventId, JSONRPCMessage]] = []
        self._event_id_counter = 0

    async def store_event(self, stream_id: StreamId, message: JSONRPCMessage) -> EventId:
        """Store an event and return its ID."""
        self._event_id_counter += 1
        event_id = str(self._event_id_counter)
        self._events.append((stream_id, event_id, message))
        return event_id

    async def replay_events_after(self, last_event_id: EventId, send_callback: EventCallback) -> StreamId | None:
        """Replay events after the specified ID for resumption."""
        # Find events after the last known event and replay them
        for _, event_id, message in self._events[start_index:]:
            await send_callback(EventMessage(message, event_id))

# From server/server.py - Passing event store to session manager
def create_server_app(event_store: Optional[EventStore] = None) -> Starlette:
    server = ResumableServer()

    # Create session manager with event store for resumption
    session_manager = StreamableHTTPSessionManager(
        app=server,
        event_store=event_store,  # Event store enables session resumption
        json_response=False,
        security_settings=security_settings,
    )

    return Starlette(routes=[Mount("/mcp", app=session_manager.handle_request)])

# Usage: Initialize with event store
event_store = SimpleEventStore()
app = create_server_app(event_store)
```

**рдХреНрд▓рд╛рдЗрдВрдЯ Metadata рдХреЗ рд╕рд╛рде Resumption Token (рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рдВрдЧреНрд░рд╣реАрдд рд╕реНрдерд┐рддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреБрдирдГ рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИ):**

```python
# From client/client.py - Client resumption with metadata
if existing_tokens and existing_tokens.get("resumption_token"):
    # Use existing resumption token to continue where we left off
    metadata = ClientMessageMetadata(
        resumption_token=existing_tokens["resumption_token"],
    )
else:
    # Create callback to save resumption token when received
    def enhanced_callback(token: str):
        protocol_version = getattr(session, 'protocol_version', None)
        token_manager.save_tokens(session_id, token, protocol_version, command, args)

    metadata = ClientMessageMetadata(
        on_resumption_token_update=enhanced_callback,
    )

# Send request with resumption metadata
result = await session.send_request(
    types.ClientRequest(
        types.CallToolRequest(
            method="tools/call",
            params=types.CallToolRequestParams(name=command, arguments=args)
        )
    ),
    types.CallToolResult,
    metadata=metadata,
)
```

рд╣реЛрд╕реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рд╕рддреНрд░ IDs рдФрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдЯреЛрдХрди рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдпрд╣ рдкреНрд░рдЧрддрд┐ рдпрд╛ рд╕реНрдерд┐рддрд┐ рдЦреЛрдП рдмрд┐рдирд╛ рдореМрдЬреВрджрд╛ рд╕рддреНрд░реЛрдВ рд╕реЗ рдкреБрдирдГ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

### рдХреЛрдб рд╕рдВрдЧрдарди

<div align="center" style="font-style: italic; font-size: 0.95em; margin-bottom: 0.5em;">
<strong>рдЪрд┐рддреНрд░ 5:</strong> MCP-рдЖрдзрд╛рд░рд┐рдд рдПрдЬреЗрдВрдЯ рдкреНрд░рдгрд╛рд▓реА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛
</div>

```mermaid
graph LR
    User([User]) -->|"Task"| Host["Host<br/>(MCP Client)"]
    Host -->|list tools| Server[MCP Server]
    Server -->|Exposes| AgentsTools[Agents as Tools]
    AgentsTools -->|Task| AgentA[Travel Agent]
    AgentsTools -->|Task| AgentB[Research Agent]

    Host -->|Monitors| StateUpdates[Progress & State Updates]
    Server -->|Publishes| StateUpdates

    class User user;
    class AgentA,AgentB agent;
    class Host,Server,StateUpdates core;
```

**рдореБрдЦреНрдп рдлрд╛рдЗрд▓реЗрдВ:**

- **`server/server.py`** - рдпрд╛рддреНрд░рд╛ рдФрд░ рдЕрдиреБрд╕рдВрдзрд╛рди рдПрдЬреЗрдВрдЯреЛрдВ рдХреЗ рд╕рд╛рде рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдпреЛрдЧреНрдп MCP рд╕рд░реНрд╡рд░ рдЬреЛ elicitation, sampling, рдФрд░ рдкреНрд░рдЧрддрд┐ рдЕрдкрдбреЗрдЯ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░рддрд╛ рд╣реИ
- **`client/client.py`** - рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рд╣реЛрд╕реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рд╕рдорд░реНрдерди, callback рд╣реИрдВрдбрд▓рд░реНрд╕, рдФрд░ рдЯреЛрдХрди рдкреНрд░рдмрдВрдзрди рдХреЗ рд╕рд╛рде
- **`server/event_store.py`** - Event Store рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЬреЛ рд╕рддреНрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдФрд░ рд╕рдВрджреЗрд╢ рдкреБрдирдГ рд╡рд┐рддрд░рдг рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИ

## MCP рдкрд░ рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рд╕рдВрдЪрд╛рд░ рддрдХ рд╡рд┐рд╕реНрддрд╛рд░

рдЙрдкрд░реЛрдХреНрдд рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╣реЛрд╕реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдмреБрджреНрдзрд┐рдорддреНрддрд╛ рдФрд░ рджрд╛рдпрд░реЗ рдХреЛ рдмрдврд╝рд╛рдХрд░ рдорд▓реНрдЯреА-рдПрдЬреЗрдВрдЯ рд╕рд┐рд╕реНрдЯрдо рддрдХ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

- **рдмреБрджреНрдзрд┐рдорд╛рди рдХрд╛рд░реНрдп рд╡рд┐рдШрдЯрди**: рд╣реЛрд╕реНрдЯ рдЬрдЯрд┐рд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдПрдЬреЗрдВрдЯреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдк-рдХрд╛рд░реНрдп рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рддрд╛ рд╣реИ
- **рдорд▓реНрдЯреА-рд╕рд░реНрд╡рд░ рд╕рдордиреНрд╡рдп**: рд╣реЛрд╕реНрдЯ рдХрдИ MCP рд╕рд░реНрд╡рд░реЛрдВ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ, рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рднрд┐рдиреНрди рдПрдЬреЗрдВрдЯ рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рддрд╛ рд╣реИ
- **рдХрд╛рд░реНрдп рд╕реНрдерд┐рддрд┐ рдкреНрд░рдмрдВрдзрди**: рд╣реЛрд╕реНрдЯ рдХрдИ рд╕рдорд╡рд░реНрддреА рдПрдЬреЗрдВрдЯ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рдкреНрд░рдЧрддрд┐ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рддрд╛ рд╣реИ, рдирд┐рд░реНрднрд░рддрд╛рдУрдВ рдФрд░ рдЕрдиреБрдХреНрд░рдордг рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ
- **рд▓рдЪреАрд▓рд╛рдкрди рдФрд░ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕**: рд╣реЛрд╕реНрдЯ рд╡рд┐рдлрд▓рддрд╛рдУрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рддрд░реНрдХ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЬрдм рдПрдЬреЗрдВрдЯ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ рддреЛ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдкреБрдирдГ рд░реВрдЯ рдХрд░рддрд╛ рд╣реИ
- **рдкрд░рд┐рдгрд╛рдо рд╕рдВрд╢реНрд▓реЗрд╖рдг**: рд╣реЛрд╕реНрдЯ рдХрдИ рдПрдЬреЗрдВрдЯреЛрдВ рд╕реЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдПрдХ рд╕реБрд╕рдВрдЧрдд рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИ

рд╣реЛрд╕реНрдЯ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЗ рдПрдХ рдмреБрджреНрдзрд┐рдорд╛рди рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░ рдореЗрдВ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рд╡рд┐рддрд░рд┐рдд рдПрдЬреЗрдВрдЯ рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рд╕рдордиреНрд╡рдп рдХрд░рддрд╛ рд╣реИ рдЬрдмрдХрд┐ MCP рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдиреАрдВрд╡ рдХреЛ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИред

## рдирд┐рд╖реНрдХрд░реНрд╖

MCP рдХреА рдЙрдиреНрдирдд рдХреНрд╖рдорддрд╛рдПрдВ - resource notifications, elicitation/sampling, resumable streams, рдФрд░ persistent resources - рдЬрдЯрд┐рд▓ рдПрдЬреЗрдВрдЯ-рд╕реЗ-рдПрдЬреЗрдВрдЯ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддреА рд╣реИрдВ рдЬрдмрдХрд┐ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреА рд╕рд╛рджрдЧреА рдмрдирд╛рдП рд░рдЦрддреА рд╣реИрдВред

## рдЖрд░рдВрдн рдХрд░рдирд╛

рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ agent2agent рд╕рд┐рд╕реНрдЯрдо рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВ? рдЗрди рдЪрд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ:

### 1. рдбреЗрдореЛ рдЪрд▓рд╛рдПрдВ

```bash
# Start the server with event store for resumption
python -m server.server --port 8006

# In another terminal, run the interactive client
python -m client.client --url http://127.0.0.1:8006/mcp
```

**рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рдореЛрдб рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдХрдорд╛рдВрдб:**

- `travel_agent` - рдореВрд▓реНрдп рдкреБрд╖реНрдЯрд┐ рдХреЗ рд╕рд╛рде рдпрд╛рддреНрд░рд╛

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдмрдХрд┐ рд╣рдо рд╕рдЯреАрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдпрд╛ рдЕрд╢реБрджреНрдзрд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдореВрд▓ рднрд╛рд╖рд╛ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдкреЗрд╢реЗрд╡рд░ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рдЧрд▓рддрдлрд╣рдореА рдпрд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЙрддреНрддрд░рджрд╛рдпреА рдирд╣реАрдВ рд╣реИрдВред  